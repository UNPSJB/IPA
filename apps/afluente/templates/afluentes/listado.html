{% extends 'index.html' %}

{% load contextMenu %}

{% block extra %}

<div>
	<table class="ui single line table">
		<thead>
			<tr>
	      		{% for header in headers%}
					<th>{{header}}</th>
	      		{% endfor %}
	      		<th>MÃ¡s Info</th>
				<th>Editar</th>
				<th>Borrar</th>
		 	</tr>
		</thead>
		<tbody>
			{% if afluentes %}
			{% for afluente in afluentes %}
			 	<tr>
					<td>{{ afluente.nombre }}</td>
					<td>{{ afluente.localidad }}</td>
					<td>{{ afluente.caudal }}</td>
					<td><button class="ui icon button info" id= {{afluente.id}} ><i class="info circle icon"></i></button></td>
					<td><button class="ui icon button edit" id= {{afluente.id}} ><i class="edit icon"></i></button></td>
					<td><button class="ui icon button delete" id= {{afluente.id}} ><i class="trash icon"></i></button></td>
				</tr>
			{% endfor %}
			{% endif %}


		</tbody>
	</table>
</div>

<div id="afludiv" class="ui modal">

</div>

{% endblock %}

{% block secondaryMenu %}
	{% renderContextMenu %}
{% endblock %}

 {% block pageStaticJs %}

 <script type="text/javascript">
$(document).ready(function(){

    	$(".button.info").click(function(){
    		var ID = $(this).attr('id');

    		$("#afludiv").load('/afluentes/detalle_afluente/' + ID, function(){
    			$(this).modal('show');
    		});
    	});

    	$(".button.edit").click(function(){
    		var ID = $(this).attr('id');

    		$("#afludiv").load('/afluentes/modificar_afluente/' + ID, function(){
    			$(this).modal('show');
    		});
    	});

    	$(".button.delete").click(function(){
    		var ID = $(this).attr('id');

    		console.log(typeof(ID));

			$("#afludiv").load('/afluentes/eliminar/' + ID, function(){
    			$(this).modal('show');
    		});
		});
});

function cerrar_modal(){
		$('#afludiv').modal('hide');
	return false;
}

</script>

{% endblock %}


