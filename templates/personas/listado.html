{% extends 'index2.html' %}
{% load actionButton %}
{% load render_table from django_tables2 %}


{% block wrapper %}
<div class="ui grid"> 
	<div class="row header-content">
		<div class="six wide column">
			{% if filter %}
				<form action="" method="get" class="ui form">
					<div class="inline field">
						{{ filter.form }}
						<button class="ui icon button">
								<i class="filter icon"></i>
						</button>				
					</div>
				</form>
			{% endif %}
		</div>
		<div class="four wide column">
			<h1 class="ui center aligned header blue "> Personas </h1>
		</div>
		<div class="six wide column">
			<button class="ui icon right floated blue button" onclick="window.location.href='alta'">
				<i class="plus icon"></i>
				Nueva persona
			</button>
		</div>
	</div>
	<div class="row lista">
		{% render_table table %}
	</div>
</div>

<div class="ui modal">
	<div class="ui center aligned header" id="modal-header"></div>
	<div class="content">
	  <p>Nombre completo: <span id="nombre"></span></p>
	  <div class="ui divider"></div> 
	  <p>Email: <span id="email"></span></p>
	  <div class="ui divider"></div>
	  <p>Documento: <span id="documento"></span></p>
	  <div class="ui divider"></div>
	  <p>Dirección: <span id="direccion"></span></p>
	  <div class="ui divider"></div>
	  <p>Teléfono: <span id="telefono"></span></p>

	</div>
	<div class="actions">
		<div class="ui cancel blue button">Cerrar</div>
	</div>
</div>

<div class="ui modal" id="informacion-modal">
	<div class="ui center aligned header" id="modal-header"></div>
	<div class="content">
	  <p>Nombre completo: <span id="nombre"></span></p>
	  <div class="ui divider"></div> 
	  <p>Email: <span id="email"></span></p>
	  <div class="ui divider"></div>
	  <p>Documento: <span id="documento"></span></p>
	  <div class="ui divider"></div>
	  <p>Dirección: <span id="direccion"></span></p>
	  <div class="ui divider"></div>
	  <p>Teléfono: <span id="telefono"></span></p>

	</div>
	<div class="actions">
		<div class="ui cancel blue button">Cerrar</div>
	</div>
</div>

<div class="ui small modal" id="eliminar-modal">
	<div class="ui center aligned header">¡Cuidado!</div>
	<div class="content">
		<p>¿Está seguro de que desea eliminar a <span id="eliminar-modal-nombre"></span>?</p>
	</div>
	<div class="actions">
		<div class="ui positive button">Eliminar</div>
		<div class="ui negative button">Cancelar</div>
	</div>
</div>


{% endblock %}

{% block customPageJs %}
	$(".ui.button.detalle").click(function(){
		$.get('/personas/detalle/' + this.id, function(data) {
			/*$("#modal-header").html("Información de " + data.nombre + " "+ data.apellido) 
			$("#nombre").html(data.nombre + " " + data.apellido)
			$("#email").html(data.email)
			$("#documento").html(data.tipoDocumento + " "+ data.numeroDocumento)*/
			$("#direccion").html(data.direccion)
			/* $("#telefono").html(data.telefono) */
			 
			$('#informacion-modal').modal('show');
		})
		//Si hay error
		//	Mostrar mensajito de error
	})

	$(".ui.button.eliminar").click(function(){
		var splitted_data = this.id.split('-');
		var nombre = splitted_data[0]
		var apellido = splitted_data[1]
		var id = splitted_data[2]
		$("#eliminar-modal-nombre").html(nombre + " " + apellido)
		$('#eliminar-modal').modal({
			onApprove : function() {
				//mandar a borrar
			}
		}).modal('show');
	})

{% endblock %}
