{% extends 'index.html' %}
{% load static semanticui %}
{% load contextMenu %}

{% block extra %} 
<div class="row header-content">
	<div class="titulo">
		<h1 class="ui header blue">Nueva Persona</h1>
	</div>
</div>

	{% if message %}
		<div class="ui error message">
		  <i class="close icon"></i>
		  <div class="header">Hubo errores en la carga de la persona:</div>
		    	<li> {{ message }}</li>
		</div>
	{% endif %}

<form class="ui large form" action="{{ form.url_post }}" method="POST">
    {% csrf_token %}
	{% render_form form %}
	<div class="field">
		<label for="id_empresas">Empresas</label>
		
	</div>
	<div class="ui grid">
		<div class="row">
			<div class="fifteen wide column">
				<div class="ui selection dropdown" style="width: 100%;">
					<input type="hidden" name="empresas" id="id_empresas">
					<i class="dropdown icon"></i>
					<div class="default text">Empresas</div>
					<div class="menu" style="width: 100%;">
						{% for empresa in empresas%}
						<div class="item" data-value="{{empresa.cuit}}">
							{{empresa.razonSocial }} - {{ empresa.cuit }}
						</div>
						{% endfor%}
					</div>
				</div>
			</div>
			<div class="one wide column">
				<button class="ui primary icon button" id="agregarEmpresa" type="button" data-tooltip="Agrega una nueva empresa">
					<i class="plus icon" ></i>
				</button>
			</div>
		</div>
	</div>
	<div class="ui grid">
		<div class="row">
			<div class="col-lg-12 text-right">
				{% if not object %}
					<input type="submit" class="ui primary button" name="cargarOtro" value="Guardar y Cargar otro">
				{% endif%}
				<input type="submit" class="ui positive button" name="guardar" value="Guardar">
			</div>
		</div>
	</div>
	<div class="ui error message">
	</div>



</form>
{% endblock %}

{% block secondaryMenu %}
	{% renderContextMenu %}
{% endblock %}


{% block customPageJs %}
	$(document).ready(function(){
		$('#agregarEmpresa').click(function(){
			var win = window.open('{% url 'empresas:alta' %}', '_blank');
			win.focus();
		})
	})

{% endblock %}